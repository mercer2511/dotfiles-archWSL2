# =====================================================================
# CONFIGURACIÓN TMUX PARA TECLADO ESPAÑOL (ESPAÑA)
# Layout: QWERTY ES - Adaptado para símbolos específicos del español
# =====================================================================

# Configuración de terminal - Habilita soporte de colores verdaderos (24-bit)
# Esencial para temas como Catppuccin que usan gradientes y colores ricos
set-option -sa terminal-overrides ",xterm*:Tc"

# Habilitar soporte de mouse - Permite redimensionar panes, seleccionar texto y hacer clic
set -g mouse on

# Cambiar tecla prefix por defecto (Ctrl+b) por Ctrl+Space (más ergonómico)
# Ctrl+Space es más fácil de presionar y no interfiere con otros atajos
# NOTA: En teclado español, Space es igual que en inglés
unbind C-b
set -g prefix C-Space
bind C-Space send-prefix

# Navegación estilo Vim entre panes usando teclas hjkl (CON prefix)
# NOTA: hjkl son las mismas teclas en layout español
bind h select-pane -L    # Izquierda (h está en la misma posición)
bind j select-pane -D    # Abajo (j está en la misma posición)  
bind k select-pane -U    # Arriba (k está en la misma posición)
bind l select-pane -R    # Derecha (l está en la misma posición)

# Iniciar numeración de ventanas y panes en 1 en lugar de 0
# Más natural ya que el teclado empieza con 1, no 0
set -g base-index 1
set -g pane-base-index 1
set-window-option -g pane-base-index 1
# Renumerar ventanas automáticamente cuando se cierra una
set-option -g renumber-windows on

# Navegación entre panes usando Alt+flechas (SIN prefix - más rápido)
# Alternativa rápida que no requiere presionar prefix
# NOTA: Las flechas son universales en todos los layouts
bind -n M-Left select-pane -L     # Alt+Izquierda
bind -n M-Right select-pane -R    # Alt+Derecha  
bind -n M-Up select-pane -U       # Alt+Arriba
bind -n M-Down select-pane -D     # Alt+Abajo

# Cambiar entre ventanas usando Shift+flechas (SIN prefix)
# Para navegar rápidamente entre diferentes sesiones de trabajo
bind -n S-Left  previous-window   # Shift+Izquierda - ventana anterior
bind -n S-Right next-window       # Shift+Derecha - ventana siguiente

# Cambiar entre ventanas usando Alt+Shift+h/l (estilo Vim, SIN prefix)  
# Para usuarios que prefieren hjkl sobre flechas
# NOTA: H y L son las mismas en teclado español
bind -n M-H previous-window       # Alt+Shift+H - ventana anterior
bind -n M-L next-window          # Alt+Shift+L - ventana siguiente

# KEYBINDINGS ESPECÍFICOS PARA TECLADO ESPAÑOL
# Divisiones de panes adaptadas a símbolos del teclado español
bind | split-window -h -c "#{pane_current_path}"     # Shift+1 (|) - división vertical EN MISMO DIRECTORIO
bind - split-window -v -c "#{pane_current_path}"     # Guión (-) - división horizontal EN MISMO DIRECTORIO

# Alternativas usando símbolos más accesibles en español:
bind "'" split-window -h -c "#{pane_current_path}"   # Comilla simple (más fácil que |)  
bind º split-window -v -c "#{pane_current_path}"     # Símbolo º (específico del español)

# Keybindings por defecto de tmux (también útiles)
bind '"' split-window -v -c "#{pane_current_path}"   # Comillas dobles - división horizontal
bind % split-window -h -c "#{pane_current_path}"     # Porcentaje - división vertical

# ==========================================
# CONFIGURACIÓN CATPPUCCIN (DREAMSOFCODE)
# ==========================================
set -g @catppuccin_flavour 'mocha'

# Lista de plugins gestionados por TPM (Tmux Plugin Manager)
set -g @plugin 'tmux-plugins/tpm'                    # Gestor de plugins
set -g @plugin 'tmux-plugins/tmux-sensible'          # Configuraciones sensibles por defecto
set -g @plugin 'christoomey/vim-tmux-navigator'      # Navegación seamless entre Vim/NeoVim y tmux
set -g @plugin 'dreamsofcode-io/catppuccin-tmux'     # Tema Catppuccin para tmux
set -g @plugin 'tmux-plugins/tmux-yank'              # Mejorar copy/paste con sistema clipboard

# Inicializar TPM - DEBE estar al final del archivo
run '~/.tmux/plugins/tpm/tpm'

# Configurar modo de copia estilo Vi - Para usuarios acostumbrados a Vim
# Permite usar hjkl, búsqueda con / y otros comandos familiares en modo copia
set-window-option -g mode-keys vi

# Keybindings personalizados para modo copia estilo Vi
# NOTA: Estas teclas son universales en ambos layouts
bind-key -T copy-mode-vi v send-keys -X begin-selection        # 'v' inicia selección visual
bind-key -T copy-mode-vi C-v send-keys -X rectangle-toggle     # 'Ctrl+v' selección rectangular/bloque  
bind-key -T copy-mode-vi y send-keys -X copy-selection-and-cancel  # 'y' copia y sale del modo copia

# KEYBINDINGS ADICIONALES PARA TECLADO ESPAÑOL
# Acceso rápido a caracteres especiales del español
bind-key -T copy-mode-vi / command-prompt -i -I "#{pane_search_string}" -p "(search down)" "send -X search-forward-incremental \"%%%\""
bind-key -T copy-mode-vi ? command-prompt -i -I "#{pane_search_string}" -p "(search up)" "send -X search-backward-incremental \"%%%\""
